<link rel="stylesheet" href="board-details.component.css" />
<div class="container">
  <div class="board-name">
    <h2>
      {{ selectedBoard?.name ?? 'selected board' }}
    </h2>
    <app-context-menu
      [id]="selectedBoard?.id ?? ''"
      [type]="'board'"
      [editingBoard]="selectedBoard"></app-context-menu>
  </div>
  <div class="buttons">
    <button type="button" class="button-global" (click)="onForm('column')">
      Add column
    </button>
  </div>
</div>
<div class="tasks" *ngIf="selectedBoard">
  <section class="section" *ngFor="let column of selectedBoard?.columns">
    <div class="section-heading">
      <h2 class="section-title">{{ column.name }}</h2>
      <app-context-menu
        [id]="column.id"
        [type]="'column'"
        [editingColumn]="column"></app-context-menu>
    </div>
    <button
      type="button"
      class="button-global add-task"
      (click)="onForm('task', column.id)">
      Add task
    </button>
    <div class="cards">
      <div class="card" *ngFor="let task of column.tasks">
        <div class="card-tags">
          <span *ngFor="let tag of task.tags">{{ tag }}</span>
        </div>
        <h3>{{ task.title }}</h3>
        <p>{{ task.description }}</p>
        <div class="card-context-menu">
          <app-context-menu
            [id]="task.id"
            [type]="'task'"
            [editingTask]="task"></app-context-menu>
        </div>
        <div class="card-subtask-wrapper">
          <div class="card-subtask" *ngFor="let subtask of task.subtasks">
            <div>
              <input
                aria-label="subtask"
                [id]="subtask.id"
                type="checkbox"
                [checked]="subtask.isFinished" />
              <label [for]="subtask.id">{{ subtask.name }}</label>
            </div>
            <app-context-menu
              [id]="subtask.id"
              [type]="'subtask'"
              [editingSubtask]="subtask"></app-context-menu>
          </div>
          <button
            type="button"
            class="button-global"
            (click)="onForm('subtask', undefined, task.id)">
            Add subtask
          </button>
        </div>
      </div>
    </div>
  </section>
</div>
<app-context-menu-modal></app-context-menu-modal>
