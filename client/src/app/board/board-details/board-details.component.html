<div class="container">
  <ng-content select="app-mobile-navigation"></ng-content>
  <div class="board-name-wrapper">
    <div class="board-name">
      <h2>
        {{ (selectedBoard$ | async)?.name ?? 'Please select a board' }}
      </h2>

      <app-context-menu
        *ngIf="(loggedInUser$ | async)?.id === (projectOwnerId$ | async)"
        [id]="(selectedBoard$ | async)?.id ?? ''"
        [type]="'board'"
        [editingBoard]="selectedBoard$ | async"></app-context-menu>
    </div>

    <div class="button-container">
      <button
        type="button"
        class="button-global button"
        (click)="onForm('see-tasks')">
        Tasks
      </button>
      <button
        type="button"
        class="button-global button"
        (click)="onForm('profile')">
        Profile
      </button>
      <button
        type="button"
        class="button-global button"
        *ngIf="selectedBoard$ | async"
        (click)="onForm('user')">
        Users ({{ (usersInTheProject$ | async)?.length }})
      </button>

      <button
        type="button"
        class="button-global board-logout-button"
        (click)="onLogout()">
        Logout
      </button>
    </div>
  </div>
  <div class="buttons" *ngIf="selectedBoard$ | async">
    <div class="add-button-container">
      <button
        *ngIf="(loggedInUser$ | async)?.id === (projectOwnerId$ | async)"
        type="button"
        class="button-global button"
        (click)="onForm('column')">
        Add column
      </button>
      <button
        type="button"
        *ngIf="boardType === 'table'"
        class="button-global button"
        (click)="onForm('task', true)">
        Add task
      </button>
    </div>

    <div
      *ngIf="(loggedInUser$ | async)?.id !== (projectOwnerId$ | async)"></div>
    <div class="extended-buttons">
      <select class="button-global button" [(ngModel)]="boardType">
        <option default value="kanban">Kanban</option>
        <option value="table">Table</option>
      </select>
      <button
        type="button"
        class="button-global button add-people-button-mobile"
        (click)="onForm('user')">
        Users
      </button>
      <select class="button-global button" [(ngModel)]="sortBy">
        <option default [value]="{ column: 'title', direction: 'asc' }" hidden>
          Title A-Z
        </option>
        <option [ngValue]="{ column: 'title', direction: 'asc' }">
          Title A-Z
        </option>
        <option [ngValue]="{ column: 'title', direction: 'des' }">
          Title Z-A
        </option>
        <option [ngValue]="{ column: 'updatedAt', direction: 'asc' }">
          UpdatedAt asc
        </option>
        <option [ngValue]="{ column: 'updatedAt', direction: 'des' }">
          UpdatedAt des
        </option>
        <option [ngValue]="{ column: 'createdAt', direction: 'asc' }">
          CreatedAt asc
        </option>
        <option [ngValue]="{ column: 'createdAt', direction: 'des' }">
          CreatedAt des
        </option>
      </select>
      <app-filter-menu
        [tags]="tags | async"
        (selectedTags)="onSelectedTags($event)"></app-filter-menu>
      <input
        type="text"
        aria-label="search task by title"
        placeholder="Search by title"
        class="search-input"
        name="searchTerm"
        [(ngModel)]="searchTerm" />
    </div>
  </div>
</div>
<app-tasks
  [selectedBoard$]="selectedBoard$"
  [searchTerm]="searchTerm"
  [tags]="checkedTags"
  [sortBy]="sortBy"
  *ngIf="boardType === 'kanban'"></app-tasks>
<app-task-table
  [selectedBoard]="selectedBoard$"
  [searchTerm]="searchTerm"
  [tags]="checkedTags"
  [sortBy]="sortBy"
  *ngIf="boardType === 'table'"></app-task-table>
